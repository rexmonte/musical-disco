{
  "summary": "Implemented Kelly Criterion for position sizing in Polymarket Market Maker bot with fractional Kelly safety constraints. The function calculates optimal bet size based on win rate, win/loss ratio, and bankroll, using a fractional Kelly approach (k/2) to reduce risk of ruin.",
  "code_snippet": "def calculate_kelly_bet_size(win_rate, win_loss_ratio, bankroll):\n    \"\"\"\n    Calculate optimal bet size using Kelly Criterion with fractional Kelly for safety.\n    \n    Args:\n        win_rate (float): Probability of winning (0-1)\n        win_loss_ratio (float): Ratio of win amount to loss amount (e.g., 1.5 means win 1.5x loss)\n        bankroll (float): Current account balance\n    \n    Returns:\n        float: Optimal bet size as fraction of bankroll (fractional Kelly k/2)\n    \"\"\"\n    # Calculate Kelly fraction (k)\n    k = win_rate - (1 - win_rate) / win_loss_ratio\n    \n    # Apply fractional Kelly (k/2) for safety to avoid ruin\n    fractional_k = k / 2\n    \n    # Ensure we don't bet more than 100% of bankroll or negative amount\n    bet_size = max(0, min(fractional_k * bankroll, bankroll))\n    \n    return bet_size",
  "explanation": "This implementation applies the Kelly Criterion for optimal bet sizing in betting or trading scenarios, particularly suited for the Polymarket Market Maker bot. The Kelly Criterion calculates the optimal fraction of bankroll to bet based on win probability and payout ratio. I've implemented fractional Kelly (k/2) rather than full Kelly to add a safety margin and reduce risk of ruin. The function takes three parameters: win_rate (probability of winning), win_loss_ratio (how much you win vs. lose), and bankroll (current account balance). The result is the optimal bet size as a fraction of the bankroll, bounded between 0 and the full bankroll amount."
}