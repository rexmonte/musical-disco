#!/bin/zsh\n# ops/pulse.sh - Trend Monitoring\n# Model: ollama/qwen3:14b\n# Schedule: :40 every 2 hours\n\nexport PATH=\"/opt/homebrew/bin:$HOME/.npm-global/bin:$PATH:/usr/local/bin:/usr/bin:/bin\"\nexport OPENCLAW_BIN=\"$HOME/.npm-global/bin/openclaw\"\nexport OPENCLAW_CONFIG=\"$HOME/.openclaw/openclaw.json\"\n\nexport OLLAMA_HOST=\"http://127.0.0.1:11434\"\nexport OLLAMA_API_KEY=\"ollama\" \nexport NO_COLOR=1\n\n# Rate Limiting setup\nRATE_LIMIT_SCOUT=\"/Users/clawdrex/.openclaw/workspace/rate_limit_scout.js\"\nif [ -f \"$RATE_LIMIT_SCOUT\" ]; then\n  echo \"Rate limit scout found, executing\...\"\n  node \"$RATE_LIMIT_SCOUT\" &\nfi\n\n# Audit Logging\nAUDIT_FILE=\"/Users/clawdrex/.openclaw/workspace/reports/usage_audit.csv\"\nSTART_TIME=$(date +%s)\nMODEL_USED=\"ollama/qwen3:14b\"\n\nTIMESTAMP=$(date +\"%Y-%m-%d_%H%M\")\nREPORT_FILE=\"/Users/clawdrex/.openclaw/workspace/reports/inbox/pulse_${TIMESTAMP}.json\"\n\ncd /Users/clawdrex/.openclaw/workspace\n\n\"$OPENCLAW_BIN\" agent \\\n  --agent \"pulse\" \\\n  --message \"Scan for emerging trends in AI, crypto market structure, and biohacking/peptides. Look for signals relevant to Rex\'s interests (Polymarket, sovereign living). Post a bulleted summary of 3-5 key signals. Output ONLY a valid JSON object with keys: \'summary\', \'signals\' (array), \'polymarket_alerts\' (array).\" \\\n  --deliver \\\n  --local \\\n  --reply-channel \"discord\" \\\n  --reply-to \"1475007798063534192\" \\\n  --thinking \"off\" \\\n  --timeout 600 > \"$REPORT_FILE\"\n\n# Log execution stats\nEND_TIME=$(date +%s)\nDURATION=$((END_TIME - START_TIME))\necho \"$(date),pulse,$MODEL_USED,${DURATION}s,LOCAL_OLLAMA\" >> \"$AUDIT_FILE\"\n